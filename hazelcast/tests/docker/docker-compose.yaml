version: "3"

services:
  hazelcast1:
    image: hazelcast/hazelcast:${HAZELCAST_VERSION}
    container_name: hazelcast1
    network_mode: host
    environment:
      PROMETHEUS_PORT: "8080"
      JAVA_OPTS: >-
        -Dhazelcast.jmx=true
        -Dcom.sun.management.jmxremote
        -Dcom.sun.management.jmxremote.port=1098
        -Dcom.sun.management.jmxremote.ssl=false
        -Dcom.sun.management.jmxremote.authenticate=false
    ports:
      - "5701:5701"
      - "1098:1098"
      - "8080:8080"
  hazelcast2:
    image: hazelcast/hazelcast:${HAZELCAST_VERSION}
    container_name: hazelcast2
    network_mode: host
    environment:
      JAVA_OPTS: >-
        -Dhazelcast.jmx=true
        -Dcom.sun.management.jmxremote
        -Dcom.sun.management.jmxremote.port=1099
        -Dcom.sun.management.jmxremote.ssl=false
        -Dcom.sun.management.jmxremote.authenticate=false
    ports:
      - "5702:5701"
      - "1099:1099"
