## WARNING
##
## This sample works only for Kafka >= 0.8.2.
## If you are running a version older than that, you can refer to agent 5.2.x released
## sample files, https://raw.githubusercontent.com/DataDog/dd-agent/5.2.1/conf.d/kafka.yaml.example

instances:

#  - host: localhost  # confluentinc/cp-zookeeper
#    port: 31000      # OK
  - host: localhost  # confluentinc/cp-server
    port: 31001      # OK
  - host: localhost  # cnfldemos/cp-server-connect-datagen
    port: 31002      # OK
##  - host: localhost  # confluentinc/cp-enterprise-control-center
##    port: 31003      # DOES NOT WORK
#  - host: localhost  # confluentinc/cp-ksql-server
#    port: 31004      # OK
##  - host: localhost  # confluentinc/ksql-examples
##    port: 31005      # DOES NOT WORK
  - host: localhost  # confluentinc/cp-kafka-rest
    port: 31006      # OK
  - host: localhost  # confluentinc/cp-schema-registry
    port: 31007      # OK
#  - host: localhost  # confluentinc/cp-enterprise-replicator
#    port: 31008      # OK

    ## @param host - string - required
    ## Kafka host to connect to.
    #
#  - host: localhost

    ## @param port - integer - required
    ## Kafka port to connect to.
    ## This is the JMX port on which Kafka exposes its metrics.
    #
#    port: 31000

    ## @param user - string - optional
    ## Username from the credentials needed to connect to the host.
    #
    # user: <USERNAME>

    ## @param password - string - optional
    ## Password from the credentials needed to connect to the host.
    #
    # password: <PASSWORD>

    ## @param process_name_regex - string - optional
    ## Instead of specifying a host, and port. The agent can connect using the attach api.
    ## This requires the JDK to be installed and the path to tools.jar to be set below in tools_jar_path parameter.
    #
    # process_name_regex: .*process_name.*

    ## @param tools_jar_path - string - optional
    ## Needs to be set when process_name_regex parameter is set.
    #
    # tools_jar_path: /usr/lib/jvm/java-7-openjdk-amd64/lib/tools.jar

    ## @param name - string - optional
    ## Set your instance name.
    #
    # name: kafka_instance

    ## @param java_bin_path - string - optional
    ## java_bin_path should be set if the agent cannot find your java executable
    #
    # java_bin_path: <JAVA_PATH>

    ## @param java_options - string - optional
    ## List of Java JVM options.
    #
    # java_options: "-Xmx200m -Xms50m"

    ## @param trust_store_path - string - optional
    ## trust_store_path should be set if ssl is enabled.
    ## path to your trusted store
    #
    # trust_store_path: <TRUSTSTORE.JKS_PATH>

    ## @param trust_store_password - string - optional
    ## trust_store_password should be set if ssl is enabled
    ## password for your TrustStore.jks file
    #
    # trust_store_password: <PASSWORD>

    ## @param key_store_path - string - optional
    ## key_store_path should be set if client authentication is enabled on the target JVM.
    ## path to your key store
    #
    # key_store_path: <KEYSTORE.JKS_PATH>

    ## @param key_store_password - string - optional
    ## key_store_password should be set if client authentication is enabled on the target JVM.
    ## password for your KeyStore.jks file
    #
    # key_store_password: <PASSWORD>

    ## @param rmi_registry_ssl - boolean - optional
    ## Whether or not the agent should connect to the rmi registry using ssl.
    #
    # rmi_registry_ssl: false

    ## @param tags - list of key:value element - optional
    ## List of tags to attach to every metric, event and service check emitted by this integration.
    ##
    ## Learn more about tagging: https://docs.datadoghq.com/tagging/
    #
    # tags:
    #   - <KEY_1>:<VALUE_1>
    #   - <KEY_2>:<VALUE_2>

## Log Section (Available for Agent >=6.0)
##
## type - mandatory - Type of log input source (tcp / udp / file / windows_event)
## port / path / channel_path - mandatory - Set port if type is tcp or udp. Set path if type is file. Set channel_path if type is windows_event
## service - mandatory - Name of the service that generated the log
## source  - mandatory - Attribute that defines which Integration sent the logs
## sourcecategory - optional - Multiple value attribute. Used to refine the source attribute
## tags: - optional - Add tags to the collected logs
##
## Discover Datadog log collection: https://docs.datadoghq.com/logs/log_collection/
#
# logs:
#
#   - type: file
#     path: /var/log/kafka/server.log
#     source: kafka
#     service: myservice
## To handle multi line that starts with yyyy-mm-dd use the following pattern
#     log_processing_rules:
#        - type: multi_line
#          name: start_with_date
#          pattern: \d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])

init_config:

  ## @param is_jmx - boolean - required
  ## Whether or not this file is a configuration for a JMX integration
  #
  is_jmx: true

  ## @param collect_default_metrics - boolean - required
  ## Whether or not the check should collect all default metrics for this integration.
  #
  collect_default_metrics: true

  ## @param conf - list of objects - required
  ## List of metrics to be collected by the integration
  ## Read http://docs.datadoghq.com/integrations/java/ to learn how to customize it
  ## Agent 5: Customize all your metrics below
  ## Agent 6: The default metrics to be collected are kept in metrics.yaml, but you can still add your own metrics here
  conf:
  - include:
      # Uncomment when https://github.com/DataDog/jmxfetch/pull/277 is merged
      # class_regex: .*$Gauge
      domain_regex: kafka\..*
      bean:
        # Kafka Broker Metrics
        - kafka.controller:type=KafkaController,name=OfflinePartitionsCount
        - kafka.controller:type=KafkaController,name=ActiveControllerCount
        - kafka.server:type=ReplicaManager,name=UnderMinIsrPartitionCount
        - kafka.server:type=ReplicaManager,name=UnderReplicatedPartitions
        - kafka.server:type=ReplicaManager,name=PartitionCount
        - kafka.server:type=ReplicaManager,name=LeaderCount
        - kafka.server:type=ReplicaFetcherManager,name=MaxLag,clientId=Replica
        - kafka.network:type=SocketServer,name=NetworkProcessorAvgIdlePercent
        - kafka.network:type=RequestChannel,name=RequestQueueSize
        - kafka.server:type=DelayedOperationPurgatory,name=PurgatorySize,delayedOperation=Produce
        - kafka.server:type=DelayedOperationPurgatory,name=PurgatorySize,delayedOperation=Fetch
      attribute:
        Value:
          alias: $domain.$type.$name
          metric_type: gauge

  - include:
      # Uncomment when https://github.com/DataDog/jmxfetch/pull/277 is merged
      # class_regex: .*$Gauge
      domain_regex: kafka\..*
      bean_regex:
        # Kafka Broker Metrics
        - kafka\.cluster:type=Partition,name=UnderMinIsr,.*
        - kafka\.server:type=FetcherLagMetrics,name=ConsumerLag,.*
      attribute:
        Value:
          alias: $domain.$type.$name
          metric_type: gauge

  - include:
      # Uncomment when https://github.com/DataDog/jmxfetch/pull/277 is merged
      # class_regex: .*$Meter
      domain_regex: kafka\..*
      bean:
        # Kafka Broker Metrics
        - kafka.server:type=BrokerTopicMetrics,name=BytesInPerSec
        - kafka.server:type=BrokerTopicMetrics,name=BytesOutPerSec
        - kafka.server:type=BrokerTopicMetrics,name=TotalProduceRequestsPerSec
        - kafka.server:type=BrokerTopicMetrics,name=TotalFetchRequestsPerSec
        - kafka.server:type=BrokerTopicMetrics,name=FailedProduceRequestsPerSec
        - kafka.server:type=BrokerTopicMetrics,name=FailedFetchRequestsPerSec
        - kafka.controller:type=ControllerStats,name=UncleanLeaderElectionsPerSec
        - kafka.server:type=KafkaRequestHandlerPool,name=RequestHandlerAvgIdlePercent
        - kafka.server:type=BrokerTopicMetrics,name=MessagesInPerSec
        - kafka.server:type=ReplicaManager,name=IsrShrinksPerSec
        - kafka.server:type=ReplicaManager,name=IsrExpandsPerSec
      attribute:
        Count:
          alias: $domain.$type.$name.rate
          metric_type: rate

  - include:
      # Uncomment when https://github.com/DataDog/jmxfetch/pull/277 is merged
      # class_regex: .*$Meter
      domain_regex: kafka\..*
      bean_regex:
        # Kafka Broker Metrics
        - kafka.network:type=RequestMetrics,name=RequestsPerSec,request=(Produce|FetchConsumer|FetchFollower).*
      attribute:
        Count:
          alias: $domain.$type.$name.rate
          metric_type: rate

  - include:
      # Uncomment when https://github.com/DataDog/jmxfetch/pull/277 is merged
      # class_regex: .*$Timer
      domain_regex: kafka\..*
      bean:
        # Kafka Broker Metrics
        - kafka.controller:type=ControllerStats,name=LeaderElectionRateAndTimeMs
        - kafka.log:type=LogFlushStats,name=LogFlushRateAndTimeMs
      attribute:
        Count:
          alias: $domain.$type.$name.rate
          metric_type: rate
        Mean:
          alias: $domain.$type.$name.avg
          metric_type: gauge

  - include:
      # Uncomment when https://github.com/DataDog/jmxfetch/pull/277 is merged
      # class_regex: .*$Histogram
      domain_regex: kafka\..*
      bean_regex:
        # Kafka Broker Metrics
        - kafka\.network:type=RequestMetrics,name=TotalTimeMs,request=(Produce|FetchConsumer|FetchFollower).*
        - kafka\.network:type=RequestMetrics,name=RequestQueueTimeMs,request=(Produce|FetchConsumer|FetchFollower).*
        - kafka\.network:type=RequestMetrics,name=LocalTimeMs,request=(Produce|FetchConsumer|FetchFollower).*
        - kafka\.network:type=RequestMetrics,name=RemoteTimeMs,request=(Produce|FetchConsumer|FetchFollower).*
        - kafka\.network:type=RequestMetrics,name=ResponseQueueTimeMs,request=(Produce|FetchConsumer|FetchFollower).*
        - kafka\.network:type=RequestMetrics,name=ResponseSendTimeMs,request=(Produce|FetchConsumer|FetchFollower).*
      attribute:
        Count:
          alias: $domain.$type.$name.rate
          metric_type: rate
        Mean:
          alias: $domain.$type.$name.avg
          metric_type: gauge

  # Kafka Connect Metrics
  # https://kafka.apache.org/documentation/#connect_monitoring
  - include:
      domain: kafka.connect
      bean: kafka.connect:type=connect-worker-metrics
      attribute:
        connector-count:
          alias: $domain.$type.$attribute
          metric_type: gauge
        connector-startup-attempts-total:
          alias: $domain.$type.$attribute
          metric_type: gauge
        connector-startup-failure-percentage:
          alias: $domain.$type.$attribute
          metric_type: gauge
        connector-startup-failure-total:
          alias: $domain.$type.$attribute
          metric_type: gauge
        connector-startup-success-percentage:
          alias: $domain.$type.$attribute
          metric_type: gauge
        connector-startup-success-total:
          alias: $domain.$type.$attribute
          metric_type: gauge
        task-count:
          alias: $domain.$type.$attribute
          metric_type: gauge
        task-startup-attempts-total:
          alias: $domain.$type.$attribute
          metric_type: gauge
        task-startup-failure-percentage:
          alias: $domain.$type.$attribute
          metric_type: gauge
        task-startup-failure-total:
          alias: $domain.$type.$attribute
          metric_type: gauge
        task-startup-success-percentage:
          alias: $domain.$type.$attribute
          metric_type: gauge
        task-startup-success-total:
          alias: $domain.$type.$attribute
          metric_type: gauge

  # Kafka Connect Metrics
  # https://kafka.apache.org/documentation/#connect_monitoring
  - include:
      domain: kafka.connect
      # Recent metrics merged on 3 Oct 2019: https://github.com/apache/kafka/pull/6843
      # Probably not present in the connector we are using for testing
      bean_regex: kafka\.connect:type=connect-worker-metrics,connector=.*
      attribute:
        connector-destroyed-task-count:
          alias: $domain.$type.$attribute
          metric_type: gauge
        connector-failed-task-count:
          alias: $domain.$type.$attribute
          metric_type: gauge
        connector-paused-task-count:
          alias: $domain.$type.$attribute
          metric_type: gauge
        connector-running-task-count:
          alias: $domain.$type.$attribute
          metric_type: gauge
        connector-total-task-count:
          alias: $domain.$type.$attribute
          metric_type: gauge
        connector-unassigned-task-count:
          alias: $domain.$type.$attribute
          metric_type: gauge

  # Kafka Connect Metrics
  # https://kafka.apache.org/documentation/#connect_monitoring
  - include:
      domain: kafka.connect
      bean: kafka.connect:type=connect-worker-rebalance-metrics
      attribute:
        completed-rebalances-total:
          alias: $domain.$type.$attribute
          metric_type: gauge
        epoch:
          alias: $domain.$type.$attribute
          metric_type: gauge
        rebalance-avg-time-ms:
          alias: $domain.$type.$attribute
          metric_type: gauge
        rebalance-max-time-ms:
          alias: $domain.$type.$attribute
          metric_type: gauge
        rebalancing:
          alias: $domain.$type.$attribute
          metric_type: gauge
        time-since-last-rebalance-ms:
          alias: $domain.$type.$attribute
          metric_type: gauge

  # Kafka Connect Metrics
  # https://kafka.apache.org/documentation/#connect_monitoring
  - include:
      domain: kafka.connect
      bean_regex: kafka\.connect:type=connector-task-metrics,connector=.*,task=.*
      attribute:
        batch-size-avg:
          # The average size of the batches processed by the connector.
          alias: $domain.$type.$attribute
          metric_type: gauge
        batch-size-max:
          # The maximum size of the batches processed by the connector.
          alias: $domain.$type.$attribute
          metric_type: gauge
        offset-commit-avg-time-ms:
          # The average time in milliseconds taken by this task to commit offsets.
          alias: $domain.$type.$attribute
          metric_type: gauge
        offset-commit-failure-percentage:
          # The average percentage of this task's offset commit attempts that failed.
          alias: $domain.$type.$attribute
          metric_type: gauge
        offset-commit-max-time-ms:
          # The maximum time in milliseconds taken by this task to commit offsets.
          alias: $domain.$type.$attribute
          metric_type: gauge
        offset-commit-success-percentage:
          # The average percentage of this task's offset commit attempts that succeeded.
          alias: $domain.$type.$attribute
          metric_type: gauge
        pause-ratio:
          # The fraction of time this task has spent in the pause state.
          alias: $domain.$type.$attribute
          metric_type: gauge
        running-ratio:
          # The fraction of time this task has spent in the running state.
          alias: $domain.$type.$attribute
          metric_type: gauge

  # Kafka Connect Metrics
  # https://kafka.apache.org/documentation/#connect_monitoring
  - include:
      domain: kafka.connect
      bean_regex: kafka\.connect:type=sink-task-metrics,connector=.*,task=.*
      attribute:
        offset-commit-completion-rate:
          # The average per-second number of offset commit completions that were completed successfully.
          alias: $domain.$type.$attribute
          metric_type: gauge
        offset-commit-completion-total:
          # The total number of offset commit completions that were completed successfully.
          alias: $domain.$type.$attribute
          metric_type: gauge
        offset-commit-seq-no:
          # The current sequence number for offset commits.
          alias: $domain.$type.$attribute
          metric_type: gauge
        offset-commit-skip-rate:
          # The average per-second number of offset commit completions that were received too late and skipped/ignored.
          alias: $domain.$type.$attribute
          metric_type: gauge
        offset-commit-skip-total:
          # The total number of offset commit completions that were received too late and skipped/ignored.
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition-count:
          # The number of topic partitions assigned to this task belonging to the named sink connector in this worker.
          alias: $domain.$type.$attribute
          metric_type: gauge
        put-batch-avg-time-ms:
          # The average time taken by this task to put a batch of sinks records.
          alias: $domain.$type.$attribute
          metric_type: gauge
        put-batch-max-time-ms:
          # The maximum time taken by this task to put a batch of sinks records.
          alias: $domain.$type.$attribute
          metric_type: gauge
        sink-record-active-count:
          # The number of records that have been read from Kafka but not yet completely committed/flushed/acknowledged by the sink task.
          alias: $domain.$type.$attribute
          metric_type: gauge
        sink-record-active-count-avg:
          # The average number of records that have been read from Kafka but not yet completely committed/flushed/acknowledged by the sink task.
          alias: $domain.$type.$attribute
          metric_type: gauge
        sink-record-active-count-max:
          # The maximum number of records that have been read from Kafka but not yet completely committed/flushed/acknowledged by the sink task.
          alias: $domain.$type.$attribute
          metric_type: gauge
        sink-record-lag-max:
          # The maximum lag in terms of number of records that the sink task is behind the consumer's position for any topic partitions.
          alias: $domain.$type.$attribute
          metric_type: gauge
        sink-record-read-rate:
          # The average per-second number of records read from Kafka for this task belonging to the named sink connector in this worker. This is before transformations are applied.
          alias: $domain.$type.$attribute
          metric_type: gauge
        sink-record-read-total:
          # The total number of records read from Kafka by this task belonging to the named sink connector in this worker, since the task was last restarted.
          alias: $domain.$type.$attribute
          metric_type: gauge
        sink-record-send-rate:
          # The average per-second number of records output from the transformations and sent/put to this task belonging to the named sink connector in this worker. This is after transformations are applied and excludes any records filtered out by the transformations.
          alias: $domain.$type.$attribute
          metric_type: gauge
        sink-record-send-total:
          # The total number of records output from the transformations and sent/put to this task belonging to the named sink connector in this worker, since the task was last restarted.
          alias: $domain.$type.$attribute
          metric_type: gauge

  # Kafka Connect Metrics
  # https://kafka.apache.org/documentation/#connect_monitoring
  - include:
      domain: kafka.connect
      bean_regex: kafka\.connect:type=source-task-metrics,connector=.*,task=.*
      attribute:
        poll-batch-avg-time-ms:
          # The average time in milliseconds taken by this task to poll for a batch of source records.
          alias: $domain.$type.$attribute
          metric_type: gauge
        poll-batch-max-time-ms:
          # The maximum time in milliseconds taken by this task to poll for a batch of source records.
          alias: $domain.$type.$attribute
          metric_type: gauge
        source-record-active-count:
          # The number of records that have been produced by this task but not yet completely written to Kafka.
          alias: $domain.$type.$attribute
          metric_type: gauge
        source-record-active-count-avg:
          # The average number of records that have been produced by this task but not yet completely written to Kafka.
          alias: $domain.$type.$attribute
          metric_type: gauge
        source-record-active-count-max:
          # The maximum number of records that have been produced by this task but not yet completely written to Kafka.
          alias: $domain.$type.$attribute
          metric_type: gauge
        source-record-poll-rate:
          # The average per-second number of records produced/polled (before transformation) by this task belonging to the named source connector in this worker.
          alias: $domain.$type.$attribute
          metric_type: gauge
        source-record-poll-total:
          # The total number of records produced/polled (before transformation) by this task belonging to the named source connector in this worker.
          alias: $domain.$type.$attribute
          metric_type: gauge
        source-record-write-rate:
          # The average per-second number of records output from the transformations and written to Kafka for this task belonging to the named source connector in this worker. This is after transformations are applied and excludes any records filtered out by the transformations.
          alias: $domain.$type.$attribute
          metric_type: gauge
        source-record-write-total:
          # The number of records output from the transformations and written to Kafka for this task belonging to the named source connector in this worker, since the task was last restarted.
          alias: $domain.$type.$attribute
          metric_type: gauge

  # Kafka Connect Metrics
  # https://kafka.apache.org/documentation/#connect_monitoring
  - include:
      domain: kafka.connect
      bean_regex: kafka\.connect:type=task-error-metrics,connector=.*,task=.*
      attribute:
        deadletterqueue-produce-failures:
          # The number of failed writes to the dead letter queue.
          alias: $domain.$type.$attribute
          metric_type: gauge
        deadletterqueue-produce-requests:
          # The number of attempted writes to the dead letter queue.
          alias: $domain.$type.$attribute
          metric_type: gauge
        last-error-timestamp:
          # The epoch timestamp when this task last encountered an error.
          alias: $domain.$type.$attribute
          metric_type: gauge
        total-errors-logged:
          # The number of errors that were logged.
          alias: $domain.$type.$attribute
          metric_type: gauge
        total-record-errors:
          # The number of record processing errors in this task.
          alias: $domain.$type.$attribute
          metric_type: gauge
        total-record-failures:
          # The number of record processing failures in this task.
          alias: $domain.$type.$attribute
          metric_type: gauge
        total-records-skipped:
          # The number of records skipped due to errors.
          alias: $domain.$type.$attribute
          metric_type: gauge
        total-retries:
          # The number of operations retried.
          alias: $domain.$type.$attribute
          metric_type: gauge

  # Components Metrics:
  #   - Kafka REST: https://docs.confluent.io/current/kafka-rest/monitoring.html
  #   - Kafka Schema Registry: https://docs.confluent.io/current/schema-registry/monitoring.html
  - include:
      domain_regex: kafka\.(rest|schema\.registry)
      bean_regex: kafka\.(rest|schema\.registry):type=jetty-metrics
      attribute:
        connections-active:
          # Total number of active TCP connections.
          alias: $domain.$type.$attribute
          metric_type: gauge
        connections-opened-rate:
          # The average rate per second of opened TCP connections.
          alias: $domain.$type.$attribute
          metric_type: gauge
        connections-closed-rate:
          # The average rate per second of closed TCP connections.
          alias: $domain.$type.$attribute
          metric_type: gauge

  # Components Metrics:
  #   - Kafka REST: https://docs.confluent.io/current/kafka-rest/monitoring.html
  #   - Kafka Schema Registry: https://docs.confluent.io/current/schema-registry/monitoring.html
  - include:
      domain_regex: kafka\.(rest|schema\.registry)
      bean_regex: kafka\.(rest|schema\.registry):type=jetty-metrics
      attribute:
        brokers.list.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.assign+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.assignment+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.commit-offsets+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.commit.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.committed-offsets+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.create+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.create.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.delete+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.delete.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.records.read-avro+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.records.read-binary+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.records.read-json+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.seek-to-beginning+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.seek-to-end+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.seek-to-offset+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.subscribe+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.subscription+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.topic.read-avro.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.topic.read-binary.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.topic.read-json.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        consumer.unsubscribe+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.consume-avro.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.consume-binary.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.consume-json.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.get+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.get.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.produce-avro+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.produce-avro.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.produce-binary+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.produce-binary.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.produce-json+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partition.produce-json.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partitions.list+v2.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        partitions.list.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        root.get.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        root.post.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        topic.get.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        topic.produce-avro.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        topic.produce-binary.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        topic.produce-json.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge
        topics.list.request-error-rate:
          alias: $domain.$type.$attribute
          metric_type: gauge

  # Components Metrics:
  #   - Kafka Schema Registry: https://docs.confluent.io/current/schema-registry/monitoring.html
  - include:
      domain: kafka.schema.registry
      bean: kafka.schema.registry:type=master-slave-role
      attribute:
        master-slave-role:
          alias: $domain.$type.$attribute
          metric_type: gauge
